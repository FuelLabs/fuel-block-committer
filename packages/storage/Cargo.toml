[package]
name = "storage"
version = "0.1.0"
edition = "2021"
publish = false

[dependencies]
async-trait = { workspace = true }
hex = { workspace = true }
ports = { workspace = true, features = ["storage"] }
rand = { workspace = true, optional = true }
serde = { workspace = true }
sqlx = { workspace = true, features = [
  "postgres",
  "runtime-tokio",
  "migrate",
  "macros",
] }
testcontainers = { workspace = true, optional = true }
thiserror = { workspace = true }
tokio = { workspace = true, optional = true }

[dev-dependencies]
ports = { workspace = true, features = ["storage"] }
rand = { workspace = true }
storage = { path = ".", features = ["test-helpers"] }
tokio = { workspace = true }

[features]
test-helpers = [
  "dep:testcontainers",
  "tokio/sync",
  "dep:rand",
  "ports/test-helpers",
]
